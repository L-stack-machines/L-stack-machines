<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="var">From</span> <span class="id" title="var">LM</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="LM.Prelims.html#"><span class="id" title="library">Prelims</span></a> <a class="idref" href="LM.Refinements.html#"><span class="id" title="library">Refinements</span></a> <a class="idref" href="LM.L.html#"><span class="id" title="library">L</span></a> <a class="idref" href="LM.Programs.html#"><span class="id" title="library">Programs</span></a> <a class="idref" href="LM.Closures.html#"><span class="id" title="library">Closures</span></a> <a class="idref" href="LM.M_stack.html#"><span class="id" title="library">M_stack</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h1 class="section">Closure Machine</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="stateC"><span class="id" title="definition">stateC</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="LM.Closures.html#Clo"><span class="id" title="inductive">Clo</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="LM.Closures.html#Clo"><span class="id" title="inductive">Clo</span></a>.<br/>
<span class="id" title="keyword">Hint Transparent</span> <a class="idref" href="LM.M_clos.html#stateC"><span class="id" title="definition">stateC</span></a>.<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;σ ≻C_ l σ'" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="var">l</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<span class="id" title="var">format</span> "σ  '≻C_' l  σ'").<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="stepC"><span class="id" title="inductive">stepC</span></a> : <a class="idref" href="LM.Refinements.html#label"><span class="id" title="inductive">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.M_clos.html#stateC"><span class="id" title="definition">stateC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.M_clos.html#stateC"><span class="id" title="definition">stateC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>:=<br/>
| <a name="step_nil"><span class="id" title="constructor">step_nil</span></a> <span class="id" title="var">E</span> <span class="id" title="var">T</span> <span class="id" title="var">V</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Programs.html#retT"><span class="id" title="constructor">retT</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_</span></a><a class="idref" href="LM.Refinements.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="constructor">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
| <a name="step_load"><span class="id" title="constructor">step_load</span></a> <span class="id" title="var">P</span> <span class="id" title="var">E</span> <span class="id" title="var">x</span> <span class="id" title="var">V</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="LM.Prelims.html#e85deacb92d7a23c6bb7e466eb915cd9"><span class="id" title="notation">.[</span></a><a class="idref" href="LM.M_clos.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="LM.Prelims.html#e85deacb92d7a23c6bb7e466eb915cd9"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="LM.M_clos.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Programs.html#varT"><span class="id" title="constructor">varT</span></a> <a class="idref" href="LM.M_clos.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">)/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_</span></a><a class="idref" href="LM.Refinements.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="constructor">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
| <a name="step_pushVal"><span class="id" title="constructor">step_pushVal</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">E</span> <span class="id" title="var">T</span> <span class="id" title="var">V</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Programs.html#lamT"><span class="id" title="constructor">lamT</span></a> <a class="idref" href="LM.M_clos.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">)/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>  <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_</span></a><a class="idref" href="LM.Refinements.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="constructor">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
| <a name="step_betaC"><span class="id" title="constructor">step_betaC</span></a> <span class="id" title="var">P</span> <span class="id" title="var">E</span> <span class="id" title="var">T</span> <span class="id" title="var">e</span> <span class="id" title="var">Q</span> <span class="id" title="var">F</span> <span class="id" title="var">V</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">(</span></a><a class="idref" href="LM.Programs.html#appT"><span class="id" title="constructor">appT</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">)/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="LM.M_clos.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#F"><span class="id" title="variable">F</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_β</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/(</span></a><a class="idref" href="LM.M_clos.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#F"><span class="id" title="variable">F</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
<span class="id" title="keyword">where</span> <a name="00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">&quot;</span></a>σ  ≻C_ l  σ'" := (<a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="variable">stepC</span></a> <span class="id" title="var">l</span> σ σ').<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="ea09fb50724e281cab15714e623ae484"><span class="id" title="notation">&quot;</span></a>(≻C_ l )" := (<a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="inductive">stepC</span></a> <span class="id" title="var">l</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">format</span> "'(≻C_' l ')'").<br/>
<span class="comment">(*&nbsp;workaround&nbsp;to&nbsp;prefere&nbsp;"x&nbsp;≻&nbsp;y"&nbsp;over&nbsp;"(≻)&nbsp;x&nbsp;y"*)</span> <span class="id" title="keyword">Notation</span> <a name="00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">&quot;</span></a>σ ≻C_ l σ'" := 0.<br/>
<span class="id" title="keyword">Notation</span> <a name="00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">&quot;</span></a>σ ≻C_ l σ'" := (<a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="inductive">stepC</span></a> <span class="id" title="var">l</span> σ σ').<br/>
<span class="id" title="keyword">Notation</span> <a name="577d4dc2eb2ef121de6d4ce5949a1cd5"><span class="id" title="notation">&quot;</span></a>(≻C)" := (<a class="idref" href="LM.Refinements.html#any"><span class="id" title="definition">any</span></a> <a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="inductive">stepC</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="62953f9364c05c08c51e24607b4ed49b"><span class="id" title="notation">&quot;</span></a>σ ≻C σ'" := (<a class="idref" href="LM.Refinements.html#any"><span class="id" title="definition">any</span></a> <a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="inductive">stepC</span></a> σ σ') (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <span class="id" title="var">clos_machine</span> := {| <a class="idref" href="LM.Refinements.html#Build_Machine"><span class="id" title="constructor">M_rel</span></a> <a class="idref" href="LM.Refinements.html#Build_Machine"><span class="id" title="constructor">:=</span></a> <a class="idref" href="LM.Refinements.html#Build_Machine"><span class="id" title="constructor">stepC</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="LM.M_clos.html#stepC"><span class="id" title="inductive">stepC</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="closedSC"><span class="id" title="definition">closedSC</span></a> : <a class="idref" href="LM.M_clos.html#stateC"><span class="id" title="definition">stateC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a class="idref" href="LM.M_clos.html#pat"><span class="id" title="variable">'(</span></a><a class="idref" href="LM.M_clos.html#pat"><span class="id" title="variable">T</span></a><a class="idref" href="LM.M_clos.html#pat"><span class="id" title="variable">,</span></a><a class="idref" href="LM.M_clos.html#pat"><span class="id" title="variable">V</span></a><a class="idref" href="LM.M_clos.html#pat"><span class="id" title="variable">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">(&lt;</span></a><a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">C</span></a> 0<a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">)</span></a> <span class="id" title="var">T</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">(&lt;</span></a><a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">C</span></a> 1<a class="idref" href="LM.Closures.html#6190598edba6460db113ba9d1d988a3b"><span class="id" title="notation">)</span></a> <span class="id" title="var">V</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="repsCS"><span class="id" title="definition">repsCS</span></a> (π:<a class="idref" href="LM.M_clos.html#stateC"><span class="id" title="definition">stateC</span></a>) (σ:<a class="idref" href="LM.M_stack.html#stateS"><span class="id" title="definition">stateS</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>:= <a class="idref" href="LM.M_clos.html#31bf0b12546409e15021243132fc7574"><span class="id" title="variable">π</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="LM.M_clos.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">&quot;</span></a>(≫CS)" := (<a class="idref" href="LM.M_clos.html#repsCS"><span class="id" title="definition">repsCS</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a name="d0f47b304b698f7ba3234c85cfee7a53"><span class="id" title="notation">&quot;</span></a>π ≫CS σ" := (<a class="idref" href="LM.M_clos.html#repsCS"><span class="id" title="definition">repsCS</span></a> π σ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="repsCS_functional"><span class="id" title="lemma">repsCS_functional</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="LM.Prelims.html#functional"><span class="id" title="definition">functional</span></a> <a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">(≫</span></a><a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">CS</span></a><a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] ? ? [? &lt;-] [? &lt;-]. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Lemma</span> <a name="cbound_cons"><span class="id" title="lemma">cbound_cons</span></a> <span class="id" title="var">P</span> <span class="id" title="var">e</span> <span class="id" title="var">E</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">C</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.M_clos.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">C</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/(</span></a><a class="idref" href="LM.M_clos.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="LM.M_clos.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">C</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1. <span class="id" title="tactic">constructor</span>;<span class="id" title="var">cbn</span>;<span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">eauto</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="reducibility"><span class="id" title="lemma">reducibility</span></a> <span class="id" title="var">T</span> <span class="id" title="var">V</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="LM.Prelims.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="LM.M_stack.html#11c7ebc5c59ec37aecd1e98549214bb3"><span class="id" title="notation">(≻</span></a><a class="idref" href="LM.M_stack.html#11c7ebc5c59ec37aecd1e98549214bb3"><span class="id" title="notation">S</span></a><a class="idref" href="LM.M_stack.html#11c7ebc5c59ec37aecd1e98549214bb3"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.Prelims.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="LM.M_clos.html#577d4dc2eb2ef121de6d4ce5949a1cd5"><span class="id" title="notation">(≻</span></a><a class="idref" href="LM.M_clos.html#577d4dc2eb2ef121de6d4ce5949a1cd5"><span class="id" title="notation">C</span></a><a class="idref" href="LM.M_clos.html#577d4dc2eb2ef121de6d4ce5949a1cd5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (σ'&amp;<span class="id" title="var">l'</span>&amp;<span class="id" title="var">R</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="LM.Prelims.html#reducible"><span class="id" title="definition">reducible</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">T</span> <span class="id" title="keyword">as</span> [|[[] <span class="id" title="var">E</span>]];<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">_</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">eq</span>. 2:<span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;-<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Arith.Minus.html#minus_n_O"><span class="id" title="lemma">minus_n_O</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="LM.Prelims.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?). <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">destruct</span> <span class="id" title="var">V</span> <span class="id" title="keyword">as</span> [|? [|[]]]. 3:<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span>. <span class="id" title="var">all</span>:<span class="id" title="var">inv</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_closed_clos</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">_</span>) |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<span class="id" title="var">_</span><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><span class="id" title="var">_</span> <a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Closures.html#64bf87ff5c618e7fe3d93f98f6515a53"><span class="id" title="notation">C</span></a> <span class="id" title="var">_</span>|- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<a class="idref" href="LM.Programs.html#lamT"><span class="id" title="constructor">lamT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">P</span></a> <span class="id" title="var">_</span>  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<a class="idref" href="LM.Programs.html#varT"><span class="id" title="constructor">varT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">P</span></a> <span class="id" title="var">_</span>  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">H</span>:<a class="idref" href="LM.Programs.html#appT"><span class="id" title="constructor">appT</span></a> <span class="id" title="var">_</span><a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">&lt;</span></a><a class="idref" href="LM.Programs.html#e3a234693bd37fe8f8d32ceaa9535a43"><span class="id" title="notation">P</span></a> <span class="id" title="var">_</span>  |- <span class="id" title="var">_</span>] =&gt; <span class="id" title="var">inv</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="closedSC_preserved"><span class="id" title="lemma">closedSC_preserved</span></a> <span class="id" title="var">T</span> <span class="id" title="var">V</span> <span class="id" title="var">T'</span> <span class="id" title="var">V'</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#62953f9364c05c08c51e24607b4ed49b"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#62953f9364c05c08c51e24607b4ed49b"><span class="id" title="notation">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? [<span class="id" title="var">l</span> <span class="id" title="var">R</span>]. <span class="id" title="var">inv</span> <span class="id" title="var">R</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="var">inv_closed_clos</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">split</span>;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#Forall_cons"><span class="id" title="constructor">Forall_cons</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>, <a class="idref" href="LM.M_clos.html#cbound_cons"><span class="id" title="lemma">cbound_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="tau_simulation"><span class="id" title="lemma">tau_simulation</span></a> <span class="id" title="var">T</span> <span class="id" title="var">V</span> <span class="id" title="var">T'</span> <span class="id" title="var">V'</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_</span></a><a class="idref" href="LM.Refinements.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="constructor">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_stack.html#a2268bf214ac2c5cc5bb884eb102fb5e"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_stack.html#a2268bf214ac2c5cc5bb884eb102fb5e"><span class="id" title="notation">S_</span></a><a class="idref" href="LM.Refinements.html#a788b57bb5319497a4de11f3392dcbc3"><span class="id" title="constructor">τ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="var">all</span>:<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="var">erewrite</span> &lt;-<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Arith.Minus.html#minus_n_O"><span class="id" title="lemma">minus_n_O</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="beta_simulation"><span class="id" title="lemma">beta_simulation</span></a> <span class="id" title="var">T</span> <span class="id" title="var">V</span> <span class="id" title="var">T'</span> <span class="id" title="var">V'</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_clos.html#00fdc4f64b7a04d9d93557eec72044ed"><span class="id" title="notation">C_β</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <a class="idref" href="LM.M_clos.html#T"><span class="id" title="variable">T</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <a class="idref" href="LM.M_clos.html#V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_stack.html#a2268bf214ac2c5cc5bb884eb102fb5e"><span class="id" title="notation">≻</span></a><a class="idref" href="LM.M_stack.html#a2268bf214ac2c5cc5bb884eb102fb5e"><span class="id" title="notation">S_β</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 0) <a class="idref" href="LM.M_clos.html#T'"><span class="id" title="variable">T'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="LM.Closures.html#3c8e78e97d2505421d740edbce3cfffd"><span class="id" title="definition">δC</span></a> 1) <a class="idref" href="LM.M_clos.html#V'"><span class="id" title="variable">V'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cs</span> <span class="id" title="var">H</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="LM.Closures.html#substPl_cons"><span class="id" title="lemma">substPl_cons</span></a>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="var">inv_closed_clos</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="LM.Prelims.html#Forall_map"><span class="id" title="lemma">Forall_map</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LM.Closures.html#translateC_boundP"><span class="id" title="lemma">translateC_boundP</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="clos_stack_refinement"><span class="id" title="lemma">clos_stack_refinement</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="LM.Refinements.html#refinement_M"><span class="id" title="definition">refinement_M</span></a> <a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">(≫</span></a><a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">CS</span></a><a class="idref" href="LM.M_clos.html#e4c70e5640a1f0e57e4a405bed5bfa54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">intros</span> [] [] [? [= &lt;- &lt;-]]. <span class="id" title="tactic">apply</span> <a class="idref" href="LM.M_clos.html#reducibility"><span class="id" title="lemma">reducibility</span></a>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">unfold</span> <a class="idref" href="LM.M_clos.html#repsCS"><span class="id" title="definition">repsCS</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> <span class="id" title="var">V</span>] [<span class="id" title="var">T'</span> <span class="id" title="var">V'</span>] [<span class="id" title="var">T0</span> <span class="id" title="var">V0</span>] [<span class="id" title="var">cs</span> [= &lt;- &lt;-]] ?.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">specialize</span> <a class="idref" href="LM.M_clos.html#closedSC_preserved"><span class="id" title="lemma">closedSC_preserved</span></a> <span class="id" title="keyword">with</span> (1:=<span class="id" title="var">cs</span>) <span class="id" title="keyword">as</span> ?.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">eauto</span> 20 <span class="id" title="keyword">using</span> <a class="idref" href="LM.M_clos.html#tau_simulation"><span class="id" title="lemma">tau_simulation</span></a>,<a class="idref" href="LM.M_clos.html#beta_simulation"><span class="id" title="lemma">beta_simulation</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compile_clos_stack"><span class="id" title="lemma">compile_clos_stack</span></a> <span class="id" title="var">P</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="LM.Programs.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#d0f47b304b698f7ba3234c85cfee7a53"><span class="id" title="notation">≫</span></a><a class="idref" href="LM.M_clos.html#d0f47b304b698f7ba3234c85cfee7a53"><span class="id" title="notation">CS</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="LM.M_clos.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cs</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">unfold</span> <a class="idref" href="LM.M_clos.html#closedSC"><span class="id" title="definition">closedSC</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="LM.Closures.html#substPl_nil"><span class="id" title="lemma">substPl_nil</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="repsCL"><span class="id" title="definition">repsCL</span></a>:= <a class="idref" href="LM.Prelims.html#rcomp"><span class="id" title="definition">rcomp</span></a> <a class="idref" href="LM.M_clos.html#repsCS"><span class="id" title="definition">repsCS</span></a> <a class="idref" href="LM.M_stack.html#repsSL"><span class="id" title="definition">repsSL</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="fe7c2e5bf068a5b84d76fcb146f6279f"><span class="id" title="notation">&quot;</span></a>(≫CL)" := (<a class="idref" href="LM.M_clos.html#repsCL"><span class="id" title="definition">repsCL</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a name="2dd2d61eec553ebf9f59ddfde5a960ed"><span class="id" title="notation">&quot;</span></a>π ≫CL s" := (<a class="idref" href="LM.M_clos.html#repsCL"><span class="id" title="definition">repsCL</span></a> π <span class="id" title="var">s</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70).<br/>
<span class="comment">(*<br/>
Lemma&nbsp;repsCL_equiv&nbsp;T&nbsp;V&nbsp;s:<br/>
&nbsp;&nbsp;(T,V)&nbsp;≫CL&nbsp;s&nbsp;&lt;-&gt;&nbsp;closedL&nbsp;s&nbsp;/\&nbsp;exists&nbsp;A,&nbsp;δV&nbsp;(map&nbsp;(δC&nbsp;1)&nbsp;V)&nbsp;=&nbsp;Some&nbsp;A&nbsp;/\&nbsp;δT&nbsp;(map&nbsp;(δC&nbsp;0)&nbsp;T)&nbsp;A&nbsp;=&nbsp;Some&nbsp;<span class="inlinecode"><span class="id" title="var">s</span></span>.<br/>
Proof.<br/>
&nbsp;&nbsp;unfold&nbsp;repsCL,repsCS,repsSL.&nbsp;split.<br/>
&nbsp;&nbsp;-intros&nbsp;(?&amp;<span class="inlinecode">?</span> <span class="inlinecode">&lt;-</span>&amp;(A&amp;?&amp;?)).&nbsp;split.&nbsp;2:eauto.&nbsp;admit.<br/>
&nbsp;&nbsp;-intros&nbsp;(?&amp;(A&amp;?&amp;?)).&nbsp;eexists;split.&nbsp;split.&nbsp;2:reflexivity.&nbsp;2:now&nbsp;cbn;eauto.&nbsp;admit.&nbsp;<br/>
Abort.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="clos_L_refinement"><span class="id" title="lemma">clos_L_refinement</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="LM.Refinements.html#refinement_ARS"><span class="id" title="definition">refinement_ARS</span></a> <a class="idref" href="LM.M_clos.html#fe7c2e5bf068a5b84d76fcb146f6279f"><span class="id" title="notation">(≫</span></a><a class="idref" href="LM.M_clos.html#fe7c2e5bf068a5b84d76fcb146f6279f"><span class="id" title="notation">CL</span></a><a class="idref" href="LM.M_clos.html#fe7c2e5bf068a5b84d76fcb146f6279f"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="LM.Refinements.html#composition"><span class="id" title="lemma">composition</span></a> <a class="idref" href="LM.M_clos.html#clos_stack_refinement"><span class="id" title="lemma">clos_stack_refinement</span></a> <a class="idref" href="LM.M_stack.html#stack_L_refinement"><span class="id" title="lemma">stack_L_refinement</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compile_clos_L"><span class="id" title="lemma">compile_clos_L</span></a> <span class="id" title="var">s</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="LM.L.html#closedL"><span class="id" title="definition">closedL</span></a> <a class="idref" href="LM.M_clos.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">[</span></a><a class="idref" href="LM.Programs.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="definition">γ</span></a> <a class="idref" href="LM.M_clos.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="LM.Programs.html#retT"><span class="id" title="constructor">retT</span></a><a class="idref" href="LM.Closures.html#f8414b4a3d1218309342fcee4de2b9ee"><span class="id" title="notation">/</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#64ee52ab9627fca8d637e2f1207a2990"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.7.2/stdlib//Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> <a class="idref" href="LM.M_clos.html#2dd2d61eec553ebf9f59ddfde5a960ed"><span class="id" title="notation">≫</span></a><a class="idref" href="LM.M_clos.html#2dd2d61eec553ebf9f59ddfde5a960ed"><span class="id" title="notation">CL</span></a> <a class="idref" href="LM.M_clos.html#s"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?. <span class="id" title="tactic">eexists</span>;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">apply</span> <a class="idref" href="LM.M_clos.html#compile_clos_stack"><span class="id" title="lemma">compile_clos_stack</span></a>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="LM.Programs.html#bound_compile"><span class="id" title="lemma">bound_compile</span></a>.<br/>
&nbsp;&nbsp;-<span class="id" title="tactic">apply</span> <a class="idref" href="LM.M_stack.html#compile_stack_L"><span class="id" title="lemma">compile_stack_L</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
